{% extends 'base.html' %}

{% block title %}Z-test{% endblock %}

{% block content %}
    <h1>Z-test</h1>
    <p>
        <b>What is a z-test?</b>
    </p>
    <p>A z-test is used to determine if there's a significant difference
        between the means of two groups or between a sample mean and a known
        population mean. It assumes the data follows a normal distribution 
        and the population variance is know. Z-tests are typically used when 
        the sample size is large (n&ge;30).
    </p>
    <br>
    <p>
        <b>How does it work?</b>
    </p>
    <ol>
        <li><b>Set hypothesis:</b> Formulate a null hypothesis (H<sub>0</sub>) that assumes
            no difference, and an alternative hypothesis (H<sub>1</sub>) that suggests
            a difference</li>
        <li><b>Calculate z-statistic:</b> Use the formula $$ z = \frac{\bar{X} - \mu}{\frac{\sigma}{\sqrt{n}}} $$
            where \(\bar{X}\) is the sample mean, &mu; is the population mean, &sigma; is the 
            population standard deviation, and n is the sample size.</li>
        <li><b>Compare to a Critical Value:</b> Based on the chosen significance level (&alpha;), 
            compare the statistic to the critical z-value. If the z-statistic is in the 
            rejection region, reject the null hypothesis.</li>
    </ol>
    <br>
    <p>
        <b>Types of z-tests</b>
    </p>
    <ul>
        <li><b>One-tailed:</b> Tests if the sample mean is significantly greater
            or less than the population mean.</li>
        <li><b>Two-tailed:</b> Tests if the sample mean is significantly different
            from the population mean (either direction).</li>
    </ul>
    <br>
    <p>
        <b>How to determine the critical z-value?</b>
    </p>
    <p>To find the critical z-value from a z-score table, follow these steps:</p>
    <ol>
        <li><b>Choose a signifcance level (&alpha;):</b> Decide on your significance 
            level (e.g., 0.05 for a 95% confidence level).</li>
        <li><b>Determine the tail type:</b></li>
            <ul>
                <li><b>One-tailed:</b> The critical z-value corresponds directly to the 
                    signifcance level.</li>
                <li><b>Two-tailed:</b> Divide the significance level by 2 (e.g., for 
                    &alpha; = 0.05, use 0.025 in each tail.</li>
            </ul>
        <li><b>Look up the area in the z-table:</b> Find the probability closest to your
            chosen tail value in the z-table (e.g., for a 0.025 tail, find 0.975 in the 
            table for the two-tailed test).</li>
        <li><b>Find the corresponding z-score:</b> The row and column of the z-table where
            this probability is located gives you the critical z-value. For example, 
            a 0.975 cumulative probability corresponds to a z-value of approximately
            1.96. Furthermore, for a one-tailed test with &alpha; = 0.05, the critical
            z-value is about 1.645.</li>
    </ol>
    <br>
    <p>
        <b>One-Sample Z-Test</b>
    </p>
    <p>
        A one-sample z-test checks if the sample mean differs from the population mean
        when the population standard deviation is known. The formula is $$ z = \frac{\bar{X} - \mu}{\frac{\sigma}{\sqrt{n}}} $$
        where \(\bar{X}\) is the sample mean, &mu; is the population mean, &sigma; is the 
        population standard deviation, and n is the sample size.
    </p>
    <ol>
        <li><b>Left-tailed test:</b></li>
        <ul>
            <li>H<sub>0</sub>: &mu; = &mu;<sub>0</sub></li>
            <li>H<sub>1</sub>: &mu; &lt; &mu;<sub>0</sub></li>
            <li><b>Reject H<sub>0</sub> if z-statistic &lt; critical z-value</b></li>
        </ul>
        <li><b>Right-tailed test:</b></li>
        <ul>
            <li>H<sub>0</sub>: &mu; = &mu;<sub>0</sub></li>
            <li>H<sub>1</sub>: &mu; &gt; &mu;<sub>0</sub></li>
            <li><b>Reject H<sub>0</sub> if z-statistic &gt; critical z-value</b></li>
        </ul>
        <li><b>Two-tailed test:</b></li>
        <ul>
            <li>H<sub>0</sub>: &mu; = &mu;<sub>0</sub></li>
            <li>H<sub>1</sub>: &mu; &ne; &mu;<sub>0</sub></li>
            <li><b>Reject H<sub>0</sub> if z-statistic &lt; critical z-value in either direction</b></li>
        </ul>
    </ol>
    <br>
    <p>
        <b>Two-Sample Z-Test</b>
    </p>
    <p>
        A two-sample z-test compares the means of two independent samples to check
        if they are significantly different. It is used when the population 
        variances are known. The formula for the z-statistic is 
        $$ z = \frac{\left( \bar{X}_1 - \bar{X}_2 \right) - \left( \mu_1 - \mu_2 \right)}{\sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}}} $$ where 
    </p>
    <ul>
        <li>\(\bar{X}\)<sub>1</sub> and \(\bar{X}\)<sub>2</sub> are the sample means</li>
        <li>&mu;<sub>1</sub> and &mu;<sub>2</sub> are the population means</li>
        <li>&sigma;<sub>1</sub> and &sigma;<sub>2</sub> are the population standard deviations</li>
        <li>n<sub>1</sub> and n<sub>2</sub> are the sample sizes</li>
    </ul>
    <br>
    <ol>
        <li><b>Left-tailed test:</b> Tests if the first sample mean is significantly
            less than the second.</li>
        <ul>
            <li>H<sub>0</sub>: &mu;<sub>1</sub> = &mu;<sub>2</sub></li>
            <li>H<sub>1</sub>: &mu;<sub>1</sub> &lt; &mu;<sub>2</sub></li>
            <li><b>Reject H<sub>0</sub> if z-statistic &lt; critical z-value</b></li>
        </ul>
        <li><b>Right-tailed test:</b> Tests if the first sample mean is significantly
            greater than the second</li>
        <ul>
            <li>H<sub>0</sub>: &mu;<sub>1</sub> = &mu;<sub>2</sub></li>
            <li>H<sub>1</sub>: &mu;<sub>1</sub> &gt; &mu;<sub>2</sub></li>
            <li><b>Reject H<sub>0</sub> if z-statistic &gt; critical z-value</b></li>
        </ul>
        <li><b>Two-tailed test:</b> Tests if the means are signifiant different in either direction.</li>
        <ul>
            <li>H<sub>0</sub>: &mu;<sub>1</sub> = &mu;<sub>2</sub></li>
            <li>H<sub>1</sub>: &mu;<sub>1</sub> &ne; &mu;<sub>2</sub></li>
            <li><b>Reject H<sub>0</sub> if z-statistic &lt; critical z-value in either direction</b></li>
        </ul>
    </ol>
    <h1> Z-Test Example</h1>
    <p>
        <b>Scenario:</b>
    </p>
    <p>
        A biologist is studyign two populations of a particular species to determine if there
        is a significant difference in the everage length of the specific DNA sequence between 
        the populations. The researcher collects data on the lengths of the DNA sequences from
        two independent populations and wants to compare the means of these two groups.
    </p>
    <p>
        <b>Research Question:</b>
    </p>
    <p>
        "Is there a significant difference in the average length of the DNA sequence between
        the two populations?"
    </p>
    <p>
        <b>Data:</b>
    </p>
    <ul>
        <li><b>Population 1:</b> The average DNA sequence length is known to be 150 base pairs (bp)
        with a standard deviation of 10 bp. A sample of 40 DNA sequences is collected from this 
        population, and the sample mean is found to be 153 bp.</li>
        <li><b>Population 2:</b> The average DNA sequence is 155 bp with a standard deviation of
        12 bp. A sample of 35 DNA sequences is collected from this popualtion, and the sample mean 
        is found to be 157 bp.</li>
    </ul>
    <p>
        <b>Hypotheses:</b>
    </p>
    <ul>
        <li><b>Null hypothesis (H<sub>0</sub>):</b> The mean length of the DNA sequences of the two
        populations is the same, such that <b>H<sub>0</sub>: &mu;<sub>1</sub>=&mu;<sub>2</sub></b></li>
        <li><b>Alternative hypothesis (H<sub>1</sub>):</b> The mean length of DNA sequences in the two 
        populations is different, such that <b>H<sub>1</sub>: &mu;<sub>1</sub>&ne;&mu;<sub>2</sub></b></li>
    </ul>
    <p>
        <b>Z-Test Formula:</b>
    </p>
    <p>
        For a two-sample z-test, the z-statistic is calculated as: 
        $$ z = \frac{\left( \bar{X}_1 - \bar{X}_2 \right) - \left( \mu_1 - \mu_2 \right)}{\sqrt{\frac{\sigma_1^2}{n_1} + \frac{\sigma_2^2}{n_2}}} $$ where 
    </p>
    <ul>
        <li>\(\bar{X}\)<sub>1</sub> = 153 bp (sample mean of Population 1),</li>
        <li>\(\bar{X}\)<sub>2</sub> = 157 bp (sample mean of Population 2),</li>
        <li>&mu;<sub>1</sub> = 150 bp (population mean of Population 1),</li>
        <li>&mu;<sub>2</sub> = 155 bp (population mean of Population 2),</li>
        <li>&sigma;<sub>1</sub> = 10 bp (standard deviation of Population 1),</li>
        <li>&sigma;<sub>2</sub> = 12 bp (standard deviation of Population 2),</li>
        <li>n<sub>1</sub> = 40 (sample size of Population 1),</li>
        <li>n<sub>2</sub> = 35 (sample size of Population 2).</li>
    </ul>
    <p>
        <b>Calculation:</b>
    </p>
    <p>
        First, calculate the z-statistic: $$ z = \frac{\left( 153 - 157 \right) - \left( 150-155 \right)}{\sqrt{\frac{10^2}{40}+\frac{12^2}{35}}} $$ = 0.389
        Find the critical z-value:
        Two-tailed test where &alpha; = 0..05, the critical value is 1.96.
    </p>
    <p>
        <b>Conclusion:</b>
    </p>
    <p>
        Since the z-statistics of 0.389 is less than the critical z-value of 1.96,
        the researcher would <b>fail to reject the null hypothesis.</b> This means that, based on the data, there is <b>not enough evidence</b> to conclude that
        the mean DNA sequence lengths between the two popualtions are significantly different.
        The observed difference in sample means could be due to random variation rather than a
        true difference in the population means.
    </p>
    <iframe src="/dash_ztest/" style="width:100%; height:600px; border:none;"></iframe>
    <br>
    <h2>Multiple Choice Quiz</h2>
    <div class="quiz">
        <p>If the z-statistic is 0.344 and the critical z-value is 0.564, would you reject or fail to reject H<sub>0</sub>?</p>
        <form id="quizForm">
            <input type="radio" name="option" value="Reject H0"> Reject H<sub>0</sub><br>
            <input type="radio" name="option" value="Fail to reject H0"> Fail to reject H<sub>0</sub><br>
            <input type="radio" name="option" value="I'm not sure"> I'm not sure<br>
            <br>
            <button type="button" onclick="checkAnswer()">Submit</button>
        </form>
        <div class="result" id="result"></div>
    </div>

    <script>
        function checkAnswer() {
            const options = document.getElementsByName('option');
            let selectedAnswer = '';
            for (const option of options) {
                if (option.checked) {
                    selectedAnswer = option.value;
                    break;
                }
            }
            
            const resultDiv = document.getElementById('result');
            if (selectedAnswer === 'Fail to reject H0') {
                resultDiv.textContent = 'Correct! You would fail to reject the null hypothesis in this situation.';
                resultDiv.style.color = 'green';
            } else {
                resultDiv.textContent = 'Try again.';
                resultDiv.style.color = 'red';
            }
        }
    </script>
    <br>
    <h1>
        Example Python Script to Run for Yourself!
    </h1>
    <p>This Python script shows you how to perform a z-test. Feel free to copy and paste it for your own use!</p>
    <pre><code class="language-python">
    import math
    import scipy.stats as stats
        
    def calculate_z_statistic(sample_mean1, sample_mean2, pop_mean1, pop_mean2, std_dev1, std_dev2, n1, n2):
        """
        Calculate the z-statistic for a two-sample z-test.
            
        Parameters:
        - sample_mean1: mean of sample 1
        - sample_mean2: mean of sample 2
        - pop_mean1: population mean for sample 1
        - pop_mean2: population mean for sample 2
        - std_dev1: standard deviation of population 1
        - std_dev2: standard deviation of population 2
        - n1: sample size for sample 1
        - n2: sample size for sample 2
            
        Returns:
        - z_statistic: calculated z-statistic
        """
        numerator = (sample_mean1 - sample_mean2) - (pop_mean1 - pop_mean2)
        denominator = math.sqrt((std_dev1**2 / n1) + (std_dev2**2 / n2))
        z_statistic = numerator / denominator
        return z_statistic
        
    def calculate_critical_value(alpha, tail_type='two-tailed'):
        """
        Calculate the critical z-value for a given significance level.
            
        Parameters:
        - alpha: significance level (e.g., 0.05 for 5% significance level)
        - tail_type: type of test ('one-tailed' or 'two-tailed')
            
        Returns:
        - critical_z: critical z-value for the given alpha and test type
        """
        if tail_type == 'two-tailed':
            critical_z = stats.norm.ppf(1 - alpha / 2)
        elif tail_type == 'one-tailed':
            critical_z = stats.norm.ppf(1 - alpha)
        return critical_z
        
    # Input sample data
    sample_mean1 = float(input("Enter sample mean for group 1: "))
    sample_mean2 = float(input("Enter sample mean for group 2: "))
    pop_mean1 = float(input("Enter population mean for group 1: "))
    pop_mean2 = float(input("Enter population mean for group 2: "))
    std_dev1 = float(input("Enter population standard deviation for group 1: "))
    std_dev2 = float(input("Enter population standard deviation for group 2: "))
    n1 = int(input("Enter sample size for group 1: "))
    n2 = int(input("Enter sample size for group 2: "))
    alpha = float(input("Enter significance level (e.g., 0.05 for 5%): "))
    tail_type = input("Enter test type ('one-tailed' or 'two-tailed'): ")
        
    # Calculate z-statistic
    z_statistic = calculate_z_statistic(sample_mean1, sample_mean2, pop_mean1, pop_mean2, std_dev1, std_dev2, n1, n2)
        
    # Calculate critical z-value
    critical_z_value = calculate_critical_value(alpha, tail_type)
        
    # Output results
    print(f"Calculated z-statistic: {z_statistic}")
    print(f"Critical z-value: {critical_z_value}")
        
    # Decision rule
    if tail_type == 'two-tailed':
        if abs(z_statistic) > critical_z_value:
            print("Reject the null hypothesis.")
        else:
            print("Fail to reject the null hypothesis.")
    elif tail_type == 'one-tailed':
        if z_statistic > critical_z_value:
            print("Reject the null hypothesis (right-tailed test).")
        elif z_statistic < -critical_z_value:
            print("Reject the null hypothesis (left-tailed test).")
        else:
            print("Fail to reject the null hypothesis.") 
    </code></pre>
{% endblock %}